# docker

1. У всех получилось всё установить всё?

2. Кто работал с докером?

3. Системы виртуализацию.

Virtual Box. Свою среду под тестирование нашего продукта. Иметь Ubuntu-среду + чтобы там было всё развернутов(фронтент + бэкенд + базы данных). Собираем стенд.

- Находим нужный образ(или скачиваем с интернета).
- Начинаем настраивать CPU/Память/Видео память. 2 СPU/8 Гб/сколько нужно.
- Развернем фронтент, развернем бэк, базы, накатим дамп и т.д.
- Можем запускать тесты.

Какие варианты реального развертывания?

- Виртуальный машина удаленная(экрана нет) или выделенный сервер.
- Облачное решение(контейнер или даже лямбда).

Почему докер?

1. Нам нужна леговестность.
2. Нам нужна автоматизация.
3. Легкость в развертывании.
4. Повторяймость.
5. Изоляция.

Почему легковестность. По факту, докер-контейнер. Есть веб-сервер. Нужна ли ему вся Ubuntu?

Когда мы создаем образ. Одни образ - один процесс(программа). Фронт/бэк/база данных(3 разных образа и контейнера)

Ubuntu операционная система на базе Linux/Unix. 

Использует декларативный подход.

Каждый шаг - это действие чтобы получить конечный результат.

Поставим задачу - я хочу запустить веб-сервер на базе NodeJS(express).

1 Шаг. Взять образ какой-то OS, где есть NodeJS.
2 Шаг. Устанавливаем все зависимости(jest и т.д.).
3 Шаг. Были наши исходники.
4 Шаг. Какое-то действие выполнили(запустили тесты).

Команды
docker pull hello-world. pull стягивает с удаленной машины на нашу машину образ hello-world.
docker run hello-world. Мы из образа создаем контейнер и запускаем его.
docker build ./ - это создание образа из Dockerfile "." - это контекст запуска
docker ps - список все рабочих контейнеров.
docker ps --all - список когда либо запущенных контейнеров













https://github.com/nlapshin/nodejs-qa-docker

1. Кто работал с докером(знает, слышал и т.д.)?
2. Кто запускал хоть какую-то виртуальную?
3. Зачем она нам нужна?
- экономия железа
- разнообразие сред
- переиспользование образов(одно окружения для разным хост-машин)
- изолированность: есть хост, а есть изолированная среда для запуска чего-либо.

Мы создаем виртуальную машину для каких целей.

- Операционная система(Ubuntu и т.д.)
- Сколько ресурсов мы ей выделим(места, память, видео-память): 20, 2 Гб, сколько-нибудь.
- выполняем бизнес-задачу.

Бизнес-задача - это запуск e2e тесты.

- нужна ли нам вся операционная система Ubuntu? Нам нужен минимальный образ для запуска тестов(nodejs + headless-browser).
- минимальное количество ресурсов для запуска браузера.
- выполнить бизнес-задачу в максимально автономном режиме.

Создали пайплайн - запустили наши тесты где-то(на сервере и т.д.) - посмотрели результ(все ли зеленое) - делаем деплой(или другой кейс)

# Образы

- ubuntu
- nodejs - все необходимое для того, чтобы nodejs работал

У каждого образа есть tag. Образ nodejs версии 18.

Мы можем их оттуда скачивать. И можем публиковать.

docker pull hello-world - это скачать образ с registry
docker run hello-world - создали(запустили) конейнер на базе образа hello-world

Как происходит поиск образа?

- образ ищется по название на вашем компьютере
- если не находит, то обращается к registy
  
Можете запустить скачивание с вашего персонального registry

Опишите последовательность действий которые нужно сделать с git-репозиторием, чтобы запустить тесты.

1. Сколнировать репозиторий.
